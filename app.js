var express = require('express');
var app = express();

var Twitter = require('twitter');
var twitter_config = require('./twitter-config.js');
var rapid_api_config = require('./rapid-api-config.js');
var https = require('https');
var T = new Twitter(twitter_config);
var countries_to_twit = ["Spain", "USA", "France", "Germany", "Italy", "UK", "China"];

// Set up your search parameters
var options = {
  hostname: 'covid-193.p.rapidapi.com',
  port: 443,
  path: '/statistics',
  method: 'GET',
  headers: {
    'x-rapidapi-host': rapid_api_config.xrapidapihost,
    'x-rapidapi-key': rapid_api_config.xrapidapikey
  }
};

app.get('/publish', function (req, res) {
  var twit = {status: 'No info today'};
  countries_to_twit.forEach(element => {
    options.path = '/statistics?country=' + element;
    https.request(options, function(res1) {
      res1.setEncoding('utf8');
      res1.on('data', function (chunk) {
        console.log(chunk);
        var jsonObject = JSON.parse(chunk);
        jsonObject.response.forEach(response => {
          var textToTwit = "COVID-19 " + response.country + " stats\n\n";
          textToTwit = textToTwit + "New cases: " + response.cases.new + "\n";
          textToTwit = textToTwit + "Total cases: " + response.cases.total + "\n";
          textToTwit = textToTwit + "New deaths: " + response.deaths.new + "\n";
          textToTwit = textToTwit + "Total deaths: " + response.deaths.total;
          console.log(textToTwit);
          twit = {"status": textToTwit};
          T.post('statuses/update', twit,  function(error, tweet, response) {
            if (error) {
              res.send(error);
            } else {
              res.send('Done');
            }
          });
        });
      });
    }).end();
  });
});

app.get('/publishTest', function (req, res) {
  var str_response = '{"get":"statistics","parameters":[],"errors":[],"results":224,"response":[{"country":"China","cases":{"new":"+42","active":1116,"critical":144,"recovered":77455,"total":81907},"deaths":{"new":"+1","total":3336},"tests":{"total":null},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Italy","cases":{"new":"+3951","active":98273,"critical":3497,"recovered":30455,"total":147577},"deaths":{"new":"+570","total":18849},"tests":{"total":906864},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Spain","cases":{"new":"+3831","active":85415,"critical":7371,"recovered":55668,"total":157053},"deaths":{"new":"+523","total":15970},"tests":{"total":355000},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"USA","cases":{"new":"+24794","active":448247,"critical":10896,"recovered":26783,"total":493360},"deaths":{"new":"+1639","total":18330},"tests":{"total":2499693},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Germany","cases":{"new":"+1922","active":63556,"critical":4895,"recovered":53913,"total":120157},"deaths":{"new":"+81","total":2688},"tests":{"total":1317887},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Iran","cases":{"new":"+1972","active":28495,"critical":3969,"recovered":35465,"total":68192},"deaths":{"new":"+122","total":4232},"tests":{"total":242568},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"France","cases":{"new":"+7120","active":86740,"critical":7004,"recovered":24932,"total":124869},"deaths":{"new":"+987","total":13197},"tests":{"total":333807},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"S-Korea","cases":{"new":"+27","active":3125,"critical":55,"recovered":7117,"total":10450},"deaths":{"new":"+4","total":208},"tests":{"total":503051},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Switzerland","cases":{"new":"+500","active":12449,"critical":386,"recovered":11100,"total":24551},"deaths":{"new":"+54","total":1002},"tests":{"total":178500},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"UK","cases":{"new":"+8681","active":64665,"critical":1559,"recovered":135,"total":73758},"deaths":{"new":"+980","total":8958},"tests":{"total":316836},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Netherlands","cases":{"new":"+1335","active":20336,"critical":1424,"recovered":250,"total":23097},"deaths":{"new":"+115","total":2511},"tests":{"total":101534},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Austria","cases":{"new":"+311","active":7172,"critical":261,"recovered":6064,"total":13555},"deaths":{"new":"+24","total":319},"tests":{"total":134743},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Belgium","cases":{"new":"+1684","active":18080,"critical":1278,"recovered":5568,"total":26667},"deaths":{"new":"+496","total":3019},"tests":{"total":84248},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Norway","cases":{"new":"+79","active":6153,"critical":70,"recovered":32,"total":6298},"deaths":{"new":"+5","total":113},"tests":{"total":123170},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Sweden","cases":{"new":"+544","active":8434,"critical":749,"recovered":381,"total":9685},"deaths":{"new":"+77","total":870},"tests":{"total":54700},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Canada","cases":{"new":"+1281","active":15656,"critical":518,"recovered":5834,"total":22046},"deaths":{"new":"+47","total":556},"tests":{"total":370315},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Denmark","cases":{"new":"+184","active":3799,"critical":113,"recovered":1773,"total":5819},"deaths":{"new":"+10","total":247},"tests":{"total":64731},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Portugal","cases":{"new":"+1516","active":14804,"critical":226,"recovered":233,"total":15472},"deaths":{"new":"+26","total":435},"tests":{"total":123564},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Malaysia","cases":{"new":"+118","active":2446,"critical":69,"recovered":1830,"total":4346},"deaths":{"new":"+3","total":70},"tests":{"total":69675},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Brazil","cases":{"new":"+1493","active":18408,"critical":296,"recovered":173,"total":19638},"deaths":{"new":"+103","total":1057},"tests":{"total":62985},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Australia","cases":{"new":"+51","active":3009,"critical":74,"recovered":3141,"total":6203},"deaths":{"new":"+2","total":53},"tests":{"total":338346},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Japan","cases":{"new":"+183","active":4746,"critical":109,"recovered":685,"total":5530},"deaths":{"new":null,"total":99},"tests":{"total":64387},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Czechia","cases":{"new":"+105","active":5209,"critical":98,"recovered":346,"total":5674}';
  str_response = str_response + ',"deaths":{"new":"+7","total":119},"tests":{"total":114854},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Turkey","cases":{"new":"+4747","active":43600,"critical":1667,"recovered":2423,"total":47029},"deaths":{"new":"+98","total":1006},"tests":{"total":307210},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Israel","cases":{"new":"+440","active":9130,"critical":124,"recovered":1183,"total":10408},"deaths":{"new":"+9","total":95},"tests":{"total":117339},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Ireland","cases":{"new":"+1515","active":7777,"critical":194,"recovered":25,"total":8089},"deaths":{"new":"+24","total":287},"tests":{"total":53000},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Diamond-Princess-","cases":{"new":null,"active":82,"critical":10,"recovered":619,"total":712},"deaths":{"new":null,"total":11},"tests":{"total":null},"day":"2020-04-09","time":"2020-04-09T15:45:06+00:00"},{"country":"Luxembourg","cases":{"new":"+108","active":2669,"critical":30,"recovered":500,"total":3223},"deaths":{"new":"+2","total":54},"tests":{"total":28273},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Pakistan","cases":{"new":"+206","active":3902,"critical":45,"recovered":727,"total":4695},"deaths":{"new":"+1","total":66},"tests":{"total":54706},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Chile","cases":{"new":"+529","active":4865,"critical":70,"recovered":1571,"total":6501},"deaths":{"new":"+8","total":65},"tests":{"total":72797},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Poland","cases":{"new":"+380","active":5456,"critical":160,"recovered":318,"total":5955},"deaths":{"new":"+7","total":181},"tests":{"total":118295},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Ecuador","cases":{"new":"+2196","active":6496,"critical":171,"recovered":368,"total":7161},"deaths":{"new":"+25","total":297},"tests":{"total":21568},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Greece","cases":{"new":"+56","active":1650,"critical":77,"recovered":269,"total":2011},"deaths":{"new":"+5","total":92},"tests":{"total":35532},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Finland","cases":{"new":"+164","active":2421,"critical":82,"recovered":300,"total":2769},"deaths":{"new":"+6","total":48},"tests":{"total":41200},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Qatar","cases":{"new":"+136","active":2279,"critical":37,"recovered":227,"total":2512},"deaths":{"new":null,"total":6},"tests":{"total":45339},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Iceland","cases":{"new":"+27","active":917,"critical":11,"recovered":751,"total":1675},"deaths":{"new":"+1","total":7},"tests":{"total":34125},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Indonesia","cases":{"new":"+219","active":2924,"critical":0,"recovered":282,"total":3512},"deaths":{"new":"+26","total":306},"tests":{"total":17679},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Singapore","cases":{"new":"+198","active":1609,"critical":29,"recovered":492,"total":2108},"deaths":{"new":"+1","total":7},"tests":{"total":72680},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Thailand","cases":{"new":"+50","active":1427,"critical":61,"recovered":1013,"total":2473},"deaths":{"new":"+1","total":33},"tests":{"total":71860},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Saudi-Arabia","cases":{"new":"+364","active":2919,"critical":57,"recovered":685,"total":3651},"deaths":{"new":"+3","total":47},"tests":{"total":115585},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Slovenia","cases":{"new":"+36","active":978,"critical":36,"recovered":137,"total":1160},"deaths":{"new":"+2","total":45},"tests":{"total":33047},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Romania","cases":{"new":"+265","active":4468,"critical":183,"recovered":729,"total":5467},"deaths":{"new":"+22","total":270},"tests":{"total":55430},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"India","cases":{"new":"+873","active":6578,"critical":0,"recovered":774,"total":7598},"deaths":{"new":"+19","total":246},"tests":{"total":189111},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Peru","cases":{"new":"+641","active":4159,"critical":130,"recovered":1569,"total":5897},"deaths":{"new":"+31","total":169},"tests":{"total":56681},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Bahrain","cases":{"new":"+38","active":380,"critical":3,"recovered":539,"total":925},"deaths":{"new":"+1","total":6},"tests":{"total":57681},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Philippines","cases":{"new":"+119","active":3834,"critical":1,"recovered":140,"total":4195},"deaths":{"new":"+18","total":221},"tests":{"total":24500},"day":';
  str_response = str_response + '"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Russia","cases":{"new":"+1786","active":11028,"critical":8,"recovered":795,"total":11917},"deaths":{"new":"+18","total":94},"tests":{"total":1090000},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Estonia","cases":{"new":"+51","active":1141,"critical":9,"recovered":93,"total":1258},"deaths":{"new":null,"total":24},"tests":{"total":27883},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Egypt","cases":{"new":"+95","active":1275,"critical":0,"recovered":384,"total":1794},"deaths":{"new":"+17","total":135},"tests":{"total":25000},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Hong-Kong","cases":{"new":"+16","active":677,"critical":15,"recovered":309,"total":990},"deaths":{"new":null,"total":4},"tests":{"total":96709},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"South-Africa","cases":{"new":"+69","active":1569,"critical":7,"recovered":410,"total":2003},"deaths":{"new":"+6","total":24},"tests":{"total":73028},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Lebanon","cases":{"new":"+27","active":513,"critical":28,"recovered":76,"total":609},"deaths":{"new":"+1","total":20},"tests":{"total":13530},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Iraq","cases":{"new":"+47","active":659,"critical":0,"recovered":550,"total":1279},"deaths":{"new":"+1","total":70},"tests":{"total":32158},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Croatia","cases":{"new":"+88","active":1243,"critical":34,"recovered":231,"total":1495},"deaths":{"new":"+1","total":21},"tests":{"total":14612},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Mexico","cases":{"new":"+260","active":2614,"critical":89,"recovered":633,"total":3441},"deaths":{"new":"+20","total":194},"tests":{"total":31492},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Panama","cases":{"new":"+224","active":2670,"critical":107,"recovered":16,"total":2752},"deaths":{"new":"+3","total":66},"tests":{"total":11776},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Colombia","cases":{"new":"+169","active":1980,"critical":85,"recovered":174,"total":2223},"deaths":{"new":"+14","total":69},"tests":{"total":34910},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Slovakia","cases":{"new":"+14","active":690,"critical":5,"recovered":23,"total":715},"deaths":{"new":null,"total":2},"tests":{"total":22957},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Kuwait","cases":{"new":"+83","active":869,"critical":26,"recovered":123,"total":993},"deaths":{"new":null,"total":1},"tests":{"total":null},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Serbia","cases":{"new":"+238","active":2916,"critical":136,"recovered":118,"total":3105},"deaths":{"new":"+5","total":71},"tests":{"total":14240},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Bulgaria","cases":{"new":"+17","active":556,"critical":33,"recovered":54,"total":635},"deaths":{"new":"+1","total":25},"tests":{"total":18502},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"San-Marino","cases":{"new":"+11","active":260,"critical":14,"recovered":50,"total":344},"deaths":{"new":null,"total":34},"tests":{"total":846},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Armenia","cases":{"new":"+16","active":776,"critical":30,"recovered":149,"total":937},"deaths":{"new":"+2","total":12},"tests":{"total":6081},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Argentina","cases":{"new":null,"active":1438,"critical":96,"recovered":375,"total":1894},"deaths":{"new":"+2","total":81},"tests":{"total":16379},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Taiwan","cases":{"new":"+2","active":285,"critical":0,"recovered":91,"total":382},"deaths":{"new":"+1","total":6},"tests":{"total":43886},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"UAE","cases":{"new":"+370","active":2926,"critical":1,"recovered":418,"total":3360},"deaths":{"new":"+2","total":16},"tests":{"total":593095},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Algeria","cases":{"new":"+95","active":1100,"critical":46,"recovered":405,"total":1761},"deaths":{"new":"+21","total":256},"tests":{"total":3359},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Latvia","cases":{"new":"+23","active":593,"critical":3,"recovered":16,"total":612},"deaths":{"new":null,"total":3},"tests":{"total":26656},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Costa-Rica","cases":{"new":"+19","active":513,"critical":13,"recovered":42,"total":558},"deaths":{"new":null,"total":3},"tests":{"total":6298},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Dominican-Republic","cases":{"new":"+271","active":2396,"critical":147,"recovered":98,';
  str_response = str_response + '"total":2620},"deaths":{"new":"+8","total":126},"tests":{"total":7936},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Uruguay","cases":{"new":"+17","active":260,"critical":13,"recovered":206,"total":473},"deaths":{"new":null,"total":7},"tests":{"total":6856},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Hungary","cases":{"new":"+210","active":1001,"critical":17,"recovered":112,"total":1190},"deaths":{"new":"+11","total":77},"tests":{"total":29948},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Jordan","cases":{"new":null,"active":195,"critical":5,"recovered":170,"total":372},"deaths":{"new":null,"total":7},"tests":{"total":17000},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Lithuania","cases":{"new":"+44","active":923,"critical":14,"recovered":54,"total":999},"deaths":{"new":"+6","total":22},"tests":{"total":36051},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Morocco","cases":{"new":"+74","active":1219,"critical":1,"recovered":122,"total":1448},"deaths":{"new":"+10","total":107},"tests":{"total":7239},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Vietnam","cases":{"new":"+2","active":113,"critical":8,"recovered":144,"total":257},"deaths":{"new":null,"total":0},"tests":{"total":118807},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Bosnia-and-Herzegovina","cases":{"new":"+43","active":736,"critical":4,"recovered":129,"total":901},"deaths":{"new":"+1","total":36},"tests":{"total":6911},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Faeroe-Islands","cases":{"new":null,"active":39,"critical":0,"recovered":145,"total":184},"deaths":{"new":null,"total":0},"tests":{"total":5408},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Andorra","cases":{"new":"+18","active":504,"critical":17,"recovered":71,"total":601},"deaths":{"new":"+1","total":26},"tests":{"total":1673},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"North-Macedonia","cases":{"new":"+48","active":638,"critical":15,"recovered":41,"total":711},"deaths":{"new":"+2","total":32},"tests":{"total":6571},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Cyprus","cases":{"new":"+31","active":527,"critical":11,"recovered":58,"total":595},"deaths":{"new":null,"total":10},"tests":{"total":16308},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Brunei","cases":{"new":"+1","active":36,"critical":3,"recovered":99,"total":136},"deaths":{"new":null,"total":1},"tests":{"total":9342},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Moldova","cases":{"new":"+149","active":1353,"critical":80,"recovered":56,"total":1438},"deaths":{"new":null,"total":29},"tests":{"total":6271},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Sri-Lanka","cases":{"new":null,"active":129,"critical":5,"recovered":54,"total":190},"deaths":{"new":null,"total":7},"tests":{"total":3248},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Albania","cases":{"new":"+7","active":211,"critical":7,"recovered":182,"total":416},"deaths":{"new":null,"total":23},"tests":{"total":3385},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Belarus","cases":{"new":"+495","active":1793,"critical":72,"recovered":169,"total":1981},"deaths":{"new":"+3","total":19},"tests":{"total":53000},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Malta","cases":{"new":"+13","active":332,"critical":4,"recovered":16,"total":350},"deaths":{"new":null,"total":2},"tests":{"total":13732},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Venezuela","cases":{"new":"+4","active":78,"critical":6,"recovered":84,"total":171},"deaths":{"new":null,"total":9},"tests":{"total":139282},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Burkina-Faso","cases":{"new":"+29","active":273,"critical":0,"recovered":146,"total":443},"deaths":{"new":"+1","total":24},"tests":{"total":null},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Tunisia","cases":{"new":"+28","active":621,"critical":78,"recovered":25,"total":671},"deaths":{"new":null,"total":25},"tests":{"total":10087},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Guadeloupe","cases":{"new":"+2","active":68,"critical":13,"recovered":67,"total":143},"deaths":{"new":null,"total":8},"tests":{"total":null},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Senegal","cases":{"new":"+15","active":126,"critical":1,"recovered":137,"total":265},"deaths":{"new":null,"total":2},"tests":{"total":null},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Kazakhstan","cases":{"new":"+31","active":738,"critical":21,"recovered":64,"total":812},"deaths":{"new":"+2","total":10},"tests":{"total":61955},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Azerbaijan","cases":{"new":"+65"';
  str_response = str_response + ',"active":822,"critical":27,"recovered":159,"total":991},"deaths":{"new":"+1","total":10},"tests":{"total":61342},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Cambodia","cases":{"new":null,"active":47,"critical":1,"recovered":72,"total":119},"deaths":{"new":null,"total":0},"tests":{"total":5768},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Palestine","cases":{"new":"+4","active":220,"critical":0,"recovered":45,"total":267},"deaths":{"new":"+1","total":2},"tests":{"total":16068},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"New-Zealand","cases":{"new":"+44","active":908,"critical":5,"recovered":373,"total":1283},"deaths":{"new":"+1","total":2},"tests":{"total":55685},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Oman","cases":{"new":"+27","active":372,"critical":3,"recovered":109,"total":484},"deaths":{"new":null,"total":3},"tests":{"total":null},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Georgia","cases":{"new":"+16","active":177,"critical":6,"recovered":54,"total":234},"deaths":{"new":null,"total":3},"tests":{"total":3271},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Trinidad-and-Tobago","cases":{"new":null,"active":100,"critical":0,"recovered":1,"total":109},"deaths":{"new":null,"total":8},"tests":{"total":1045},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Ukraine","cases":{"new":"+311","active":2073,"critical":33,"recovered":61,"total":2203},"deaths":{"new":"+12","total":69},"tests":{"total":23522},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"R&eacute;union","cases":{"new":"+20","active":342,"critical":3,"recovered":40,"total":382},"deaths":{"new":null,"total":0},"tests":{"total":null},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Uzbekistan","cases":{"new":"+42","active":579,"critical":8,"recovered":42,"total":624},"deaths":{"new":null,"total":3},"tests":{"total":70000},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Cameroon","cases":{"new":"+17","active":710,"critical":0,"recovered":98,"total":820},"deaths":{"new":null,"total":12},"tests":{"total":null},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Martinique","cases":{"new":"+2","active":98,"critical":19,"recovered":50,"total":154},"deaths":{"new":"+2","total":6},"tests":{"total":null},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Liechtenstein","cases":{"new":"+1","active":23,"critical":0,"recovered":55,"total":79},"deaths":{"new":null,"total":1},"tests":{"total":900},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Channel-Islands","cases":{"new":"+37","active":349,"critical":0,"recovered":40,"total":398},"deaths":{"new":"+1","total":9},"tests":{"total":1157},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Bangladesh","cases":{"new":"+94","active":364,"critical":1,"recovered":33,"total":424},"deaths":{"new":"+6","total":27},"tests":{"total":7359},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Afghanistan","cases":{"new":"+37","active":474,"critical":0,"recovered":32,"total":521},"deaths":{"new":null,"total":15},"tests":{"total":null},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Honduras","cases":{"new":"+39","active":352,"critical":10,"recovered":7,"total":382},"deaths":{"new":null,"total":23},"tests":{"total":1600},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"DRC","cases":{"new":"+35","active":182,"critical":0,"recovered":13,"total":215},"deaths":{"new":"+2","total":20},"tests":{"total":null},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Nigeria","cases":{"new":"+12","active":230,"critical":2,"recovered":51,"total":288},"deaths":{"new":"+1","total":7},"tests":{"total":5000},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Cuba","cases":{"new":"+49","active":498,"critical":11,"recovered":51,"total":564},"deaths":{"new":null,"total":15},"tests":{"total":12023},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"}';
  str_response = str_response + ',{"country":"Ghana","cases":{"new":null,"active":368,"critical":2,"recovered":4,"total":378},"deaths":{"new":null,"total":6},"tests":{"total":37405},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Puerto-Rico","cases":{"new":"+8","active":36,"critical":0,"recovered":1,"total":39},"deaths":{"new":null,"total":2},"tests":{"total":null},"day":"2020-03-25","time":"2020-03-25T06:00:07+00:00"},{"country":"Jamaica","cases":{"new":null,"active":46,"critical":0,"recovered":13,"total":63},"deaths":{"new":null,"total":4},"tests":{"total":907},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Bolivia","cases":{"new":"+4","active":247,"critical":3,"recovered":2,"total":268},"deaths":{"new":"+1","total":19},"tests":{"total":591},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Guyana","cases":{"new":"+4","active":23,"critical":4,"recovered":8,"total":37},"deaths":{"new":"+1","total":6},"tests":{"total":145},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Paraguay","cases":{"new":"+5","active":105,"critical":1,"recovered":18,"total":129},"deaths":{"new":"+1","total":6},"tests":{"total":2262},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Macao","cases":{"new":"+1","active":35,"critical":1,"recovered":10,"total":45},"deaths":{"new":null,"total":0},"tests":{"total":null},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Monaco","cases":{"new":"+6","active":84,"critical":4,"recovered":5,"total":90},"deaths":{"new":null,"total":1},"tests":{"total":null},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"French-Guiana","cases":{"new":"+6","active":40,"critical":1,"recovered":43,"total":83},"deaths":{"new":null,"total":0},"tests":{"total":null},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Guatemala","cases":{"new":"+31","active":106,"critical":3,"recovered":17,"total":126},"deaths":{"new":null,"total":3},"tests":{"total":1134},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Rwanda","cases":{"new":"+3","active":106,"critical":0,"recovered":7,"total":113},"deaths":{"new":null,"total":0},"tests":{"total":806},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Montenegro","cases":{"new":"+3","active":249,"critical":7,"recovered":4,"total":255},"deaths":{"new":null,"total":2},"tests":{"total":2329},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Togo","cases":{"new":"+3","active":48,"critical":0,"recovered":25,"total":76},"deaths":{"new":null,"total":3},"tests":{"total":2069},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"French-Polynesia","cases":{"new":"+4","active":51,"critical":0,"recovered":0,"total":51},"deaths":{"new":null,"total":0},"tests":{"total":744},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Guam","cases":{"new":"+3","active":31,"critical":0,"recovered":0,"total":32},"deaths":{"new":null,"total":1},"tests":{"total":null},"day":"2020-03-25","time":"2020-03-25T06:00:07+00:00"},{"country":"Mauritius","cases":{"new":"+4","active":286,"critical":3,"recovered":23,"total":318},"deaths":{"new":"+2","total":9},"tests":{"total":6730},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Barbados","cases":{"new":"+1","active":52,"critical":4,"recovered":11,"total":67},"deaths":{"new":"+1","total":4},"tests":{"total":694},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Ivory-Coast","cases":{"new":"+60","active":389,"critical":0,"recovered":52,"total":444},"deaths":{"new":null,"total":3},"tests":{"total":null},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Kyrgyzstan","cases":{"new":"+18","active":258,"critical":5,"recovered":35,"total":298},"deaths":{"new":"+1","total":5},"tests":{"total":9618},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Maldives","cases":{"new":"+1","active":6,"critical":0,"recovered":13,"total":19},"deaths":{"new":null,"total":0},"tests":{"total":null},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Mayotte","cases":{"new":"+7","active":139,"critical":4,"recovered":50,"total":191},"deaths":{"new":null,"total":2},"tests":';
  str_response = str_response + '{"total":1300},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Gibraltar","cases":{"new":"+4","active":58,"critical":1,"recovered":69,"total":127},"deaths":{"new":null,"total":0},"tests":{"total":1543},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Mongolia","cases":{"new":"+1","active":12,"critical":0,"recovered":4,"total":16},"deaths":{"new":null,"total":0},"tests":{"total":null},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Ethiopia","cases":{"new":"+9","active":58,"critical":1,"recovered":4,"total":65},"deaths":{"new":"+1","total":3},"tests":{"total":3232},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Kenya","cases":{"new":"+5","active":160,"critical":2,"recovered":22,"total":189},"deaths":{"new":null,"total":7},"tests":{"total":5278},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Seychelles","cases":{"new":"+1","active":11,"critical":0,"recovered":0,"total":11},"deaths":{"new":null,"total":0},"tests":{"total":null},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Equatorial-Guinea","cases":{"new":"+2","active":15,"critical":0,"recovered":3,"total":18},"deaths":{"new":null,"total":0},"tests":{"total":854},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Tanzania","cases":{"new":"+7","active":24,"critical":0,"recovered":5,"total":32},"deaths":{"new":"+2","total":3},"tests":{"total":null},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"US-Virgin-Islands","cases":{"new":"+11","active":17,"critical":0,"recovered":0,"total":17},"deaths":{"new":null,"total":0},"tests":{"total":null},"day":"2020-03-25","time":"2020-03-25T06:00:07+00:00"},{"country":"Gabon","cases":{"new":"+10","active":42,"critical":0,"recovered":1,"total":44},"deaths":{"new":null,"total":1},"tests":{"total":null},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Aruba","cases":{"new":"+4","active":59,"critical":0,"recovered":27,"total":86},"deaths":{"new":null,"total":0},"tests":{"total":1058},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Saint-Martin","cases":{"new":null,"active":19,"critical":5,"recovered":11,"total":32},"deaths":{"new":null,"total":2},"tests":{"total":null},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Suriname","cases":{"new":null,"active":5,"critical":0,"recovered":4,"total":10},"deaths":{"new":null,"total":1},"tests":{"total":null},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Bahamas","cases":{"new":"+1","active":28,"critical":1,"recovered":5,"total":41},"deaths":{"new":"+1","total":8},"tests":{"total":null},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"New-Caledonia","cases":{"new":null,"active":17,"critical":0,"recovered":1,"total":18},"deaths":{"new":null,"total":0},"tests":{"total":2608},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Cayman-Islands","cases":{"new":"+6","active":38,"critical":0,"recovered":6,"total":45},"deaths":{"new":null,"total":1},"tests":{"total":479},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Cura&ccedil;ao","cases":{"new":"+1","active":6,"critical":0,"recovered":7,"total":14},"deaths":{"new":null,"total":1},"tests":{"total":null},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Cabo-Verde","cases":{"new":null,"active":5,"critical":0,"recovered":1,"total":7},"deaths":{"new":null,"total":1},"tests":{"total":null},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"CAR","cases":{"new":"+5","active":8,"critical":0,"recovered":0,"total":8},"deaths":{"new":null,"total":0},"tests":{"total":null},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Congo","cases":{"new":"+15","active":50,"critical":0,"recovered":5,"total":60},"deaths":{"new":null,"total":5},"tests":{"total":null},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"El-Salvador","cases":{"new":"+14","active":96,"critical":4,"recovered":15,"total":117},"deaths":{"new":null,"total":6},"tests":{"total":null},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Liberia","cases":{"new":"+6","active":29,"critical":0,"recovered":3,"total":37},"deaths":{"new":"+1","total":5},"tests":{"total":null},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Madagascar","cases":{"new":"+5","active":82,"critical":1,"recovered":11,"total":93},"deaths":{"new":null,"total":0},"tests":{"total":null},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Namibia","cases":{"new":null,"active":13,"critical":0,"recovered":3,"total":16},"deaths":{"new":null,"total":0},"tests":{"total":362},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"St-Barth","cases":{"new":"+1","active":5,"critical":0,"recovered":1,"total":6},"deaths":{"new":null,"total":0},"tests":{"total":null},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Zimbabwe","cases":{"new":null,"active":8,"critical":0,"recovered":0,"total":11},"deaths":{"new":null,"total":3},"tests":{"total":438},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Sudan","cases":{"new":"+1","active":11,"critical":0,"recovered":2,"total":15},"deaths":{"new":null,"total":2},"tests":{"total":null},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Angola","cases":{"new":"+2","active":15,"critical":0,"recovered"';
  str_response = str_response + ':2,"total":19},"deaths":{"new":null,"total":2},"tests":{"total":null},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Benin","cases":{"new":"+9","active":29,"critical":0,"recovered":5,"total":35},"deaths":{"new":null,"total":1},"tests":{"total":null},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Bermuda","cases":{"new":null,"active":19,"critical":2,"recovered":25,"total":48},"deaths":{"new":null,"total":4},"tests":{"total":354},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Bhutan","cases":{"new":null,"active":3,"critical":0,"recovered":2,"total":5},"deaths":{"new":null,"total":0},"tests":{"total":1166},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Fiji","cases":{"new":"+1","active":16,"critical":0,"recovered":0,"total":16},"deaths":{"new":null,"total":0},"tests":{"total":null},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Greenland","cases":{"new":null,"active":0,"critical":0,"recovered":11,"total":11},"deaths":{"new":null,"total":0},"tests":{"total":770},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Guinea","cases":{"new":"+30","active":183,"critical":0,"recovered":11,"total":194},"deaths":{"new":null,"total":0},"tests":{"total":null},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Haiti","cases":{"new":"+1","active":29,"critical":0,"recovered":0,"total":31},"deaths":{"new":null,"total":2},"tests":{"total":365},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Isle-of-Man","cases":{"new":"+11","active":97,"critical":11,"recovered":103,"total":201},"deaths":{"new":null,"total":1},"tests":{"total":1934},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Mauritania","cases":{"new":"+1","active":4,"critical":0,"recovered":2,"total":7},"deaths":{"new":null,"total":1},"tests":{"total":258},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Nicaragua","cases":{"new":"+1","active":6,"critical":0,"recovered":0,"total":7},"deaths":{"new":null,"total":1},"tests":{"total":null},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Saint-Lucia","cases":{"new":"+1","active":14,"critical":0,"recovered":1,"total":15},"deaths":{"new":null,"total":0},"tests":{"total":null},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Zambia","cases":{"new":"+1","active":13,"critical":1,"recovered":25,"total":40},"deaths":{"new":"+1","total":2},"tests":{"total":1239},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Nepal","cases":{"new":null,"active":8,"critical":0,"recovered":1,"total":9},"deaths":{"new":null,"total":0},"tests":{"total":3524},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Antigua-and-Barbuda","cases":{"new":null,"active":17,"critical":1,"recovered":0,"total":19},"deaths":{"new":"+1","total":2},"tests":{"total":40},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Chad","cases":{"new":"+1","active":9,"critical":0,"recovered":2,"total":11},"deaths":{"new":null,"total":0},"tests":{"total":null},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Djibouti","cases":{"new":"+10","active":113,"critical":0,"recovered":36,"total":150},"deaths":{"new":null,"total":1},"tests":{"total":3740},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Eritrea","cases":{"new":"+1","active":34,"critical":0,"recovered":0,"total":34},"deaths":{"new":null,"total":0},"tests":{"total":null},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Gambia","cases":{"new":null,"active":1,"critical":0,"recovered":2,"total":4},"deaths":{"new":null,"total":1},"tests":{"total":null},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Vatican-City","cases":{"new":"+1","active":6,"critical":0,"recovered":2,"total":8},"deaths":{"new":null,"total":0},"tests":{"total":null},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Montserrat","cases":{"new":"+3","active":9,"critical":1,"recovered":0,"total":9},"deaths":{"new":null,"total":0},"tests":{"total":36},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Niger","cases":{"new":"+68","active":359,"critical":0,"recovered":40,"total":410},"deaths":{"new":null,"total":11},"tests":{"total":4251},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Papua-New-Guinea","cases":{"new":"+1","active":2,"critical":0,"recovered":0,"total":2},"deaths":';
  str_response = str_response + '{"new":null,"total":0},"tests":{"total":72},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"St-Vincent-Grenadines","cases":{"new":"+4","active":11,"critical":0,"recovered":1,"total":12},"deaths":{"new":null,"total":0},"tests":{"total":56},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Sint-Maarten","cases":{"new":"+7","active":39,"critical":2,"recovered":3,"total":50},"deaths":{"new":"+2","total":8},"tests":{"total":134},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Somalia","cases":{"new":"+9","active":19,"critical":0,"recovered":1,"total":21},"deaths":{"new":null,"total":1},"tests":{"total":null},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Eswatini","cases":{"new":"+2","active":5,"critical":0,"recovered":7,"total":12},"deaths":{"new":null,"total":0},"tests":{"total":null},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Timor-Leste","cases":{"new":"+1","active":1,"critical":0,"recovered":1,"total":2},"deaths":{"new":null,"total":0},"tests":{"total":null},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Uganda","cases":{"new":"+1","active":53,"critical":0,"recovered":0,"total":53},"deaths":{"new":null,"total":0},"tests":{"total":3310},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"All","cases":{"new":"+80902","active":1207275,"critical":49774,"recovered":375221,"total":1684554},"deaths":{"new":"+6366","total":102058},"tests":{"total":null},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Mozambique","cases":{"new":"+3","active":18,"critical":0,"recovered":2,"total":20},"deaths":{"new":null,"total":0},"tests":{"total":483},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Syria","cases":{"new":null,"active":13,"critical":0,"recovered":4,"total":19},"deaths":{"new":null,"total":2},"tests":{"total":null},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Grenada","cases":{"new":null,"active":12,"critical":2,"recovered":0,"total":12},"deaths":{"new":null,"total":0},"tests":{"total":45},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Dominica","cases":{"new":"+1","active":11,"critical":0,"recovered":5,"total":16},"deaths":{"new":null,"total":0},"tests":{"total":309},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Turks-and-Caicos","cases":{"new":"+3","active":7,"critical":0,"recovered":0,"total":8},"deaths":{"new":null,"total":1},"tests":{"total":61},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Belize","cases":{"new":"+1","active":8,"critical":1,"recovered":0,"total":10},"deaths":{"new":"+1","total":2},"tests":{"total":364},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Myanmar","cases":{"new":"+4","active":22,"critical":0,"recovered":2,"total":27},"deaths":{"new":null,"total":3},"tests":{"total":1406},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Laos","cases":{"new":null,"active":16,"critical":0,"recovered":0,"total":16},"deaths":{"new":null,"total":0},"tests":{"total":1035},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Libya","cases":{"new":"+3","active":15,"critical":0,"recovered":8,"total":24},"deaths":{"new":null,"total":1},"tests":{"total":492},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Mali","cases":{"new":"+13","active":58,"critical":0,"recovered":22,"total":87},"deaths":{"new":null,"total":7},"tests":{"total":null},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Guinea-Bissau","cases":{"new":"+3","active":36,"critical":0,"recovered":0,"total":36},"deaths":{"new":null,"total":0},"tests":{"total":1500},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"British-Virgin-Islands","cases":{"new":"+1","active":3,"critical":0,"recovered":0,"total":3},"deaths":{"new":null,"total":0},"tests":{"total":null},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Saint-Kitts-and-Nevis","cases":{"new":null,"active":11,"critical":0,"recovered":0,"total":11},"deaths":{"new":null,"total":0},"tests":{"total":197},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Anguilla","cases":{"new":"+1","active":3,"critical":0,"recovered":0,"total":3},"deaths":{"new":null,"total":0},"tests":{"total":null},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"MS-Zaandam-","cases":{"new":"+7","active":7,"critical":0,"recovered":0,"total":9},"deaths":{"new":"+2","total":2},"tests":{"total":null},"day":"2020-04-09","time":"2020-04-09T15:45:06+00:00"},{"country":"MS-Zaandam","cases":{"new":null,"active":7,"critical":0,"recovered":0,"total":9},"deaths":{"new":null,"total":2},"tests":{"total":null},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},';
  str_response = str_response + '{"country":"Botswana","cases":{"new":"+7","active":12,"critical":0,"recovered":0,"total":13},"deaths":{"new":null,"total":1},"tests":{"total":1154},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Sierra-Leone","cases":{"new":"+1","active":8,"critical":0,"recovered":0,"total":8},"deaths":{"new":null,"total":0},"tests":{"total":null},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Burundi","cases":{"new":"+1","active":3,"critical":0,"recovered":0,"total":3},"deaths":{"new":null,"total":0},"tests":{"total":null},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Caribbean-Netherlands","cases":{"new":null,"active":2,"critical":0,"recovered":0,"total":2},"deaths":{"new":null,"total":0},"tests":{"total":10},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Malawi","cases":{"new":"+1","active":8,"critical":1,"recovered":0,"total":9},"deaths":{"new":null,"total":1},"tests":{"total":null},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Falkland-Islands","cases":{"new":"+3","active":4,"critical":0,"recovered":1,"total":5},"deaths":{"new":null,"total":0},"tests":{"total":137},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Western-Sahara","cases":{"new":"+4","active":4,"critical":0,"recovered":0,"total":4},"deaths":{"new":null,"total":0},"tests":{"total":null},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"South-Sudan","cases":{"new":"+1","active":4,"critical":0,"recovered":0,"total":4},"deaths":{"new":null,"total":0},"tests":{"total":null},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Saint-Pierre-Miquelon","cases":{"new":"+1","active":1,"critical":0,"recovered":0,"total":1},"deaths":{"new":null,"total":0},"tests":{"total":null},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Sao-Tome-and-Principe","cases":{"new":"+4","active":4,"critical":0,"recovered":0,"total":4},"deaths":{"new":null,"total":0},"tests":{"total":19},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"North-America","cases":{"new":"+26774","active":473869,"critical":11849,"recovered":33741,"total":526994},"deaths":{"new":"+1718","total":19384},"tests":{"total":null},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Europe","cases":{"new":"+37942","active":550317,"critical":30232,"recovered":196573,"total":816794},"deaths":{"new":"+4086","total":69904},"tests":{"total":null},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Asia","cases":{"new":"+10667","active":130383,"critical":6575,"recovered":133960,"total":274564},"deaths":{"new":"+325","total":10221},"tests":{"total":null},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"South-America","cases":{"new":"+4885","active":38108,"critical":876,"recovered":4596,"total":44490},"deaths":{"new":"+171","total":1786},"tests":{"total":null},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Oceania","cases":{"new":"+96","active":4003,"critical":79,"recovered":3515,"total":7573},"deaths":{"new":"+3","total":55},"tests":{"total":null},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Africa","cases":{"new":"+538","active":10506,"critical":153,"recovered":2217,"total":13418},"deaths":{"new":"+63","total":695},"tests":{"total":null},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Diamond-Princess","cases":{"new":null,"active":82,"critical":10,"recovered":619,"total":712},"deaths":{"new":null,"total":11},"tests":{"total":null},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"},{"country":"Yemen","cases":{"new":"+1","active":1,"critical":0,"recovered":0,"total":1},"deaths":{"new":null,"total":0},"tests":{"total":null},"day":"2020-04-10","time":"2020-04-10T20:15:04+00:00"}]}';
  var jsonObject = JSON.parse(str_response);
  var twit = {status: 'No info today'};
  jsonObject.response.forEach(element => {
    if (countries_to_twit.includes(element.country)) {
      //console.log('good');
    } else {
      //console.log(element.country);
    }
  });
  https.request(options, function(res1) {
    res1.setEncoding('utf8');
    res1.on('data', function (chunk) {
      console.log(chunk);
      var jsonObject = JSON.parse(chunk);
      jsonObject.response.forEach(response => {
        var textToTwit = "COVID-19 " + response.country + " stats\n\n";
        textToTwit = textToTwit + "New cases: " + response.cases.new + "\n";
        textToTwit = textToTwit + "Total cases: " + response.cases.total + "\n";
        textToTwit = textToTwit + "New deaths: " + response.deaths.new + "\n";
        textToTwit = textToTwit + "Total deaths: " + response.deaths.total;
        console.log(textToTwit);
        twit = {"status": textToTwit};
      });
    });
  }).end();  
});


function sleep(ms) {
  return new Promise(resolve => setTimeout(resolve, ms));
}

app.listen(3000, function () {
    console.log('Example app listening on port 3000!');
});